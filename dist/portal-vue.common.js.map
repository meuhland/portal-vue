{"version":3,"file":"portal-vue.common.js","sources":["../src/utils/index.ts","../src/components/wormhole.ts","../src/components/portal.tsx","../src/components/portal-target.tsx","../src/components/mounting-portal.tsx","../src/index.ts"],"sourcesContent":["import { VNode } from 'vue'\nimport { Transport } from '../types'\n\nexport const inBrowser = typeof window !== 'undefined'\n\nexport function freeze<R>(item: R[]): ReadonlyArray<R> {\n  if (Array.isArray(item) || typeof item === 'object') {\n    return Object.freeze(item)\n  }\n  return item\n}\n\nexport function combinePassengers(\n  transports: Transport[],\n  slotProps = {}\n): Array<VNode> {\n  return transports.reduce((passengers, transport) => {\n    const temp = transport.passengers[0]\n    const newPassengers =\n      typeof temp === 'function'\n        ? (temp(slotProps) as VNode[])\n        : (transport.passengers as VNode[])\n    return passengers.concat(newPassengers)\n  }, [] as Array<VNode>)\n}\n\nexport function stableSort<T>(array: T[], compareFn: Function) {\n  return array\n    .map((v: T, idx: number) => {\n      return [idx, v] as [number, T]\n    })\n    .sort(function (a, b) {\n      return compareFn(a[1], b[1]) || a[0] - b[0]\n    })\n    .map((c) => c[1])\n}\n\nexport function pick<T extends object, K extends keyof T>(\n  obj: T,\n  keys: K[]\n): Pick<T, K> {\n  return keys.reduce((acc, key) => {\n    if (obj.hasOwnProperty(key)) {\n      acc[key] = obj[key]\n    }\n    return acc\n  }, {} as Pick<T, K>)\n}\n","import Vue from 'vue'\nimport { freeze, inBrowser, stableSort } from '../utils'\nimport {\n  Transports,\n  Transport,\n  TransportInput,\n  TransportVector,\n  VMRegister,\n} from '../types'\n\nconst transports: Transports = {}\nconst targets: VMRegister = {}\nconst sources: VMRegister = {}\n\nexport const Wormhole = Vue.extend({\n  data: () => ({\n    transports,\n    targets,\n    sources,\n    trackInstances: inBrowser,\n  }),\n  methods: {\n    open(transport: TransportInput) {\n      if (!inBrowser) return\n      const { to, from, passengers, order = Infinity } = transport\n      if (!to || !from || !passengers) return\n\n      const newTransport = {\n        to,\n        from,\n        passengers: freeze<object>(passengers),\n        order,\n      } as Transport\n      const keys = Object.keys(this.transports)\n\n      if (keys.indexOf(to) === -1) {\n        Vue.set(this.transports, to, [])\n      }\n\n      const currentIndex = this.$_getTransportIndex(newTransport)\n      // Copying the array here so that the PortalTarget change event will actually contain two distinct arrays\n      const newTransports = this.transports[to].slice(0)\n      if (currentIndex === -1) {\n        newTransports.push(newTransport)\n      } else {\n        newTransports[currentIndex] = newTransport\n      }\n\n      this.transports[to] = stableSort<Transport>(\n        newTransports,\n        (a: Transport, b: Transport) => a.order - b.order\n      )\n    },\n\n    close(transport: TransportVector, force = false) {\n      const { to, from } = transport\n      if (!to || (!from && force === false)) return\n      if (!this.transports[to]) {\n        return\n      }\n\n      if (force) {\n        this.transports[to] = []\n      } else {\n        const index = this.$_getTransportIndex(transport)\n        if (index >= 0) {\n          // Copying the array here so that the PortalTarget change event will actually contain two distinct arrays\n          const newTransports = this.transports[to].slice(0)\n          newTransports.splice(index, 1)\n          this.transports[to] = newTransports\n        }\n      }\n    },\n    registerTarget(target: string, vm: Vue, force?: boolean): void {\n      if (!inBrowser) return\n      if (this.trackInstances && !force && this.targets[target]) {\n        console.warn(`[portal-vue]: Target ${target} already exists`)\n      }\n      this.$set(this.targets, target, Object.freeze([vm]))\n    },\n    unregisterTarget(target: string) {\n      this.$delete(this.targets, target)\n    },\n    registerSource(source: string, vm: Vue, force?: boolean): void {\n      if (!inBrowser) return\n      if (this.trackInstances && !force && this.sources[source]) {\n        console.warn(`[portal-vue]: source ${source} already exists`)\n      }\n      this.$set(this.sources, source, Object.freeze([vm]))\n    },\n    unregisterSource(source: string) {\n      this.$delete(this.sources, source)\n    },\n    hasTarget(to: string) {\n      return !!(this.targets[to] && this.targets[to][0])\n    },\n    hasSource(to: string) {\n      return !!(this.sources[to] && this.sources[to][0])\n    },\n    hasContentFor(to: string) {\n      return !!this.transports[to] && !!this.transports[to].length\n    },\n    // Internal\n    $_getTransportIndex({ to, from }: TransportVector): number {\n      for (const i in this.transports[to]) {\n        if (this.transports[to][i].from === from) {\n          return +i\n        }\n      }\n      return -1\n    },\n  },\n})\n\nconst wormhole = new Wormhole(transports)\nexport { wormhole }\n","import Vue from 'vue'\nimport { VNode } from 'vue'\nimport { TransportInput, TransportVector } from '../types'\nimport { wormhole } from './wormhole'\n\nlet _id = 1\n\nexport default Vue.extend({\n  name: 'portal',\n  props: {\n    disabled: { type: Boolean },\n    name: { type: String, default: () => String(_id++) },\n    order: { type: Number, default: 0 },\n    slim: { type: Boolean },\n    slotProps: { type: Object, default: () => ({}) },\n    tag: { type: String, default: 'DIV' },\n    to: {\n      type: String,\n      default: () => String(Math.round(Math.random() * 10000000)),\n    },\n  },\n  created() {\n    this.$nextTick(() => {\n      wormhole.registerSource(this.name, this)\n    })\n  },\n  mounted() {\n    if (!this.disabled) {\n      this.sendUpdate()\n    }\n  },\n\n  updated() {\n    if (this.disabled) {\n      this.clear()\n    } else {\n      this.sendUpdate()\n    }\n  },\n\n  beforeDestroy() {\n    wormhole.unregisterSource(this.name)\n    this.clear()\n  },\n  watch: {\n    to(newValue: string, oldValue: string): void {\n      oldValue && oldValue !== newValue && this.clear(oldValue)\n      this.sendUpdate()\n    },\n  },\n\n  methods: {\n    clear(target?: string) {\n      const closer: TransportVector = {\n        from: this.name,\n        to: target || this.to,\n      }\n      wormhole.close(closer)\n    },\n    normalizeSlots(): Function[] | VNode[] | undefined {\n      return this.$scopedSlots.default\n        ? [this.$scopedSlots.default]\n        : this.$slots.default\n    },\n    normalizeOwnChildren(children: VNode[] | Function): VNode[] {\n      return typeof children === 'function'\n        ? children(this.slotProps)\n        : children\n    },\n    sendUpdate() {\n      const slotContent = this.normalizeSlots()\n      if (slotContent) {\n        const transport: TransportInput = {\n          from: this.name,\n          to: this.to,\n          passengers: [...slotContent],\n          order: this.order,\n        }\n        wormhole.open(transport)\n      } else {\n        this.clear()\n      }\n    },\n  },\n\n  render(h): VNode {\n    const children: VNode[] | Function =\n      this.$slots.default || this.$scopedSlots.default || []\n    const Tag = this.tag\n    if (children && this.disabled) {\n      return children.length <= 1 && this.slim ? (\n        this.normalizeOwnChildren(children)[0]\n      ) : (\n        <Tag>{this.normalizeOwnChildren(children)}</Tag>\n      )\n    } else {\n      return this.slim\n        ? h()\n        : h(Tag, {\n            class: { 'v-portal': true },\n            style: { display: 'none' },\n            key: 'v-portal-placeholder',\n          })\n    }\n  },\n})\n","import Vue from 'vue'\nimport { VNode, PropOptions } from 'vue'\nimport { combinePassengers } from '@/utils'\nimport { Transport, PropWithComponent } from '../types'\n\nimport { wormhole } from '@/components/wormhole'\n\nexport default Vue.extend({\n  name: 'portalTarget',\n  props: {\n    multiple: { type: Boolean, default: false },\n    name: { type: String, required: true },\n    slim: { type: Boolean, default: false },\n    slotProps: { type: Object, default: () => ({}) },\n    tag: { type: String, default: 'div' },\n    transition: {\n      type: [String, Object, Function],\n    } as PropOptions<PropWithComponent>,\n  },\n  data() {\n    return {\n      transports: wormhole.transports,\n      firstRender: true,\n    }\n  },\n  created() {\n    this.$nextTick(() => {\n      wormhole.registerTarget(this.name, this)\n    })\n  },\n  watch: {\n    ownTransports() {\n      this.$emit('change', this.children().length > 0)\n    },\n    name(newVal, oldVal) {\n      /**\n       * TODO\n       * This should warn as well ...\n       */\n      wormhole.unregisterTarget(oldVal)\n      wormhole.registerTarget(newVal, this)\n    },\n  },\n  mounted() {\n    if (this.transition) {\n      this.$nextTick(() => {\n        // only when we have a transition, because it causes a re-render\n        this.firstRender = false\n      })\n    }\n  },\n  beforeDestroy() {\n    wormhole.unregisterTarget(this.name)\n  },\n\n  computed: {\n    ownTransports(): Transport[] {\n      const transports: Transport[] = this.transports[this.name] || []\n      if (this.multiple) {\n        return transports\n      }\n      return transports.length === 0 ? [] : [transports[transports.length - 1]]\n    },\n    passengers(): VNode[] {\n      return combinePassengers(this.ownTransports, this.slotProps)\n    },\n  },\n\n  methods: {\n    // can't be a computed prop because it has to \"react\" to $slot changes.\n    children(): VNode[] {\n      return this.passengers.length !== 0\n        ? this.passengers\n        : this.$scopedSlots.default\n        ? (this.$scopedSlots.default(this.slotProps) as VNode[])\n        : this.$slots.default || []\n    },\n    // can't be a computed prop because it has to \"react\" to this.children().\n    noWrapper() {\n      const noWrapper = this.slim && !this.transition\n      if (noWrapper && this.children().length > 1) {\n        console.warn(\n          '[portal-vue]: PortalTarget with `slim` option received more than one child element.'\n        )\n      }\n      return noWrapper\n    },\n  },\n  render(h): VNode {\n    const noWrapper = this.noWrapper()\n    const children = this.children()\n    const Tag = this.transition || this.tag\n\n    return noWrapper\n      ? children[0]\n      : this.slim && !Tag\n      ? h()\n      : h(\n          Tag,\n          {\n            props: {\n              // if we have a transition component, pass the tag if it exists\n              tag: this.transition && this.tag ? this.tag : undefined,\n            },\n            class: { 'vue-portal-target': true },\n          },\n\n          children\n        )\n  },\n})\n","import Vue from 'vue'\nimport { VNode, VueConstructor, PropOptions } from 'vue'\nimport Portal from './portal'\nimport PortalTarget from './portal-target'\nimport { wormhole } from './wormhole'\nimport { pick } from '@/utils'\n\nimport { PropWithComponent } from '../types'\n\nlet _id = 0\n\nexport type withPortalTarget = VueConstructor<\n  Vue & {\n    portalTarget: any\n  }\n>\n\nconst portalProps = [\n  'disabled',\n  'name',\n  'order',\n  'slim',\n  'slotProps',\n  'tag',\n  'to',\n]\n\nconst targetProps = ['multiple', 'transition']\n\nexport default (Vue as withPortalTarget).extend({\n  name: 'MountingPortal',\n  inheritAttrs: false,\n  props: {\n    append: { type: [Boolean, String] },\n    bail: {\n      type: Boolean,\n    },\n    mountTo: { type: String, required: true },\n\n    // Portal\n    disabled: { type: Boolean },\n    // name for the portal\n    name: {\n      type: String,\n      default: () => 'mounted_' + String(_id++),\n    },\n    order: { type: Number, default: 0 },\n    slim: { type: Boolean },\n    slotProps: { type: Object, default: () => ({}) },\n    tag: { type: String, default: 'DIV' },\n    // name for the target\n    to: {\n      type: String,\n      default: () => String(Math.round(Math.random() * 10000000)),\n    },\n\n    // Target\n    multiple: { type: Boolean, default: false },\n    targetSlim: { type: Boolean },\n    targetSlotProps: { type: Object, default: () => ({}) },\n    targetTag: { type: String, default: 'div' },\n    transition: {\n      type: [String, Object, Function],\n    } as PropOptions<PropWithComponent>,\n  },\n  created() {\n    if (typeof document === 'undefined') return\n    let el: HTMLElement | null = document.querySelector(this.mountTo)\n    if (!el) {\n      let iframe: any = document.querySelector('.PSPDFKit-Container > iframe');\n      el =\n        iframe.contentWindow.document.body.querySelector(this.mountTo);\n    }\n    if (!el) {\n      console.error(\n        `[portal-vue]: Mount Point '${this.mountTo}' not found in document`\n      )\n      return\n    }\n\n    const props = this.$props\n\n    // Target already exists\n    if (wormhole.targets[props.name]) {\n      if (props.bail) {\n        console.warn(`[portal-vue]: Target ${props.name} is already mounted.\n        Aborting because 'bail: true' is set`)\n      } else {\n        this.portalTarget = wormhole.targets[props.name]\n      }\n      return\n    }\n\n    const { append } = props\n    if (append) {\n      const type = typeof append === 'string' ? append : 'DIV'\n      const mountEl = document.createElement(type)\n      el.appendChild(mountEl)\n      el = mountEl\n    }\n\n    // get props for target from $props\n    // we have to rename a few of them\n    const _props = pick(this.$props, targetProps)\n    _props.slim = this.targetSlim\n    _props.tag = this.targetTag\n    _props.slotProps = this.targetSlotProps\n    _props.name = this.to\n\n    this.portalTarget = new PortalTarget({\n      el,\n      parent: this.$parent || this,\n      propsData: _props,\n    })\n  },\n\n  beforeDestroy() {\n    const target = this.portalTarget\n    if (this.append) {\n      const el = target.$el\n      el.parentNode.removeChild(el)\n    }\n    target.$destroy()\n  },\n\n  render(h): VNode {\n    if (!this.portalTarget) {\n      console.warn(\"[portal-vue] Target wasn't mounted\")\n      return h()\n    }\n\n    // if there's no \"manual\" scoped slot, so we create a <Portal> ourselves\n    if (!this.$scopedSlots.manual) {\n      const props = pick(this.$props, portalProps)\n      return h(\n        Portal,\n        {\n          props: props,\n          attrs: this.$attrs,\n          on: this.$listeners,\n          scopedSlots: this.$scopedSlots,\n        },\n        this.$slots.default\n      )\n    }\n\n    // else, we render the scoped slot\n    let content: VNode = this.$scopedSlots.manual({\n      to: this.to,\n    }) as unknown as VNode\n\n    // if user used <template> for the scoped slot\n    // content will be an array\n    if (Array.isArray(content)) {\n      content = content[0]\n    }\n\n    if (!content) return h()\n\n    return content\n  },\n})\n","import Vue from 'vue'\nimport { VueConstructor } from 'vue'\nimport Portal from './components/portal'\nimport PortalTarget from './components/portal-target'\nimport MountingPortal from './components/mounting-portal'\nimport { wormhole as Wormhole } from './components/wormhole'\n\ndeclare global {\n  interface Window {\n    Vue?: VueConstructor<Vue>\n  }\n}\n\nexport interface PluginOptions {\n  portalName?: string\n  portalTargetName?: string\n  MountingPortalName?: string\n}\n\nfunction install(Vue: VueConstructor<Vue>, options: PluginOptions = {}) {\n  Vue.component(options.portalName || 'Portal', Portal)\n  Vue.component(options.portalTargetName || 'PortalTarget', PortalTarget)\n  Vue.component(options.MountingPortalName || 'MountingPortal', MountingPortal)\n}\nif (\n  // @ts-ignore\n  process.env.ROLLUP_BUILD_MODE === 'umd' &&\n  typeof window !== 'undefined' &&\n  window.Vue &&\n  window.Vue === Vue\n) {\n  window.Vue.use({ install: install })\n}\n\nexport default {\n  install,\n}\n\nexport { Portal, PortalTarget, MountingPortal, Wormhole }\n"],"names":["inBrowser","window","freeze","item","Array","isArray","_typeof","Object","combinePassengers","transports","slotProps","arguments","length","undefined","reduce","passengers","transport","temp","newPassengers","concat","stableSort","array","compareFn","map","v","idx","sort","a","b","c","pick","obj","keys","acc","key","hasOwnProperty","targets","sources","Wormhole","Vue","extend","data","trackInstances","methods","open","to","from","_transport$order","order","Infinity","newTransport","indexOf","set","currentIndex","$_getTransportIndex","newTransports","slice","push","close","force","index","splice","registerTarget","target","vm","console","warn","$set","unregisterTarget","$delete","registerSource","source","unregisterSource","hasTarget","hasSource","hasContentFor","_ref","i","wormhole","_id","name","props","disabled","type","Boolean","String","default","_default","Number","slim","tag","Math","round","random","created","$nextTick","_this","mounted","sendUpdate","updated","clear","beforeDestroy","watch","newValue","oldValue","closer","normalizeSlots","$scopedSlots","$slots","normalizeOwnChildren","children","slotContent","_toConsumableArray","render","h","Tag","class","style","display","multiple","required","transition","Function","firstRender","ownTransports","$emit","newVal","oldVal","_this2","computed","noWrapper","portalProps","targetProps","inheritAttrs","append","bail","mountTo","targetSlim","targetSlotProps","targetTag","document","el","querySelector","iframe","contentWindow","body","error","$props","portalTarget","mountEl","createElement","appendChild","_props","PortalTarget","parent","$parent","propsData","$el","parentNode","removeChild","$destroy","manual","Portal","attrs","$attrs","on","$listeners","scopedSlots","content","install","options","component","portalName","portalTargetName","MountingPortalName","MountingPortal"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGO,IAAMA,SAAS,GAAG,OAAOC,MAAM,KAAK,WAAW;AAEtD,SAAgBC,MAAMA,CAAIC,IAAS;EACjC,IAAIC,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,IAAIG,OAAA,CAAOH,IAAI,MAAK,QAAQ,EAAE;IACnD,OAAOI,MAAM,CAACL,MAAM,CAACC,IAAI,CAAC;;EAE5B,OAAOA,IAAI;;AAGb,SAAgBK,iBAAiBA,CAC/BC,UAAuB;MACvBC,SAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAEd,OAAOF,UAAU,CAACK,MAAM,CAAC,UAACC,UAAU,EAAEC,SAAS;IAC7C,IAAMC,IAAI,GAAGD,SAAS,CAACD,UAAU,CAAC,CAAC,CAAC;IACpC,IAAMG,aAAa,GACjB,OAAOD,IAAI,KAAK,UAAU,GACrBA,IAAI,CAACP,SAAS,CAAa,GAC3BM,SAAS,CAACD,UAAsB;IACvC,OAAOA,UAAU,CAACI,MAAM,CAACD,aAAa,CAAC;GACxC,EAAE,EAAkB,CAAC;;AAGxB,SAAgBE,UAAUA,CAAIC,KAAU,EAAEC,SAAmB;EAC3D,OAAOD,KAAK,CACTE,GAAG,CAAC,UAACC,CAAI,EAAEC,GAAW;IACrB,OAAO,CAACA,GAAG,EAAED,CAAC,CAAgB;GAC/B,CAAC,CACDE,IAAI,CAAC,UAAUC,CAAC,EAAEC,CAAC;IAClB,OAAON,SAAS,CAACK,CAAC,CAAC,CAAC,CAAC,EAAEC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAID,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC;GAC5C,CAAC,CACDL,GAAG,CAAC,UAACM,CAAC;IAAA,OAAKA,CAAC,CAAC,CAAC,CAAC;IAAC;;AAGrB,SAAgBC,IAAIA,CAClBC,GAAM,EACNC,IAAS;EAET,OAAOA,IAAI,CAAClB,MAAM,CAAC,UAACmB,GAAG,EAAEC,GAAG;IAC1B,IAAIH,GAAG,CAACI,cAAc,CAACD,GAAG,CAAC,EAAE;MAC3BD,GAAG,CAACC,GAAG,CAAC,GAAGH,GAAG,CAACG,GAAG,CAAC;;IAErB,OAAOD,GAAG;GACX,EAAE,EAAgB,CAAC;;;ACpCtB,IAAMxB,UAAU,GAAe,EAAE;AACjC,IAAM2B,OAAO,GAAe,EAAE;AAC9B,IAAMC,OAAO,GAAe,EAAE;AAE9B,AAAO,IAAMC,QAAQ,GAAGC,GAAG,CAACC,MAAM,CAAC;EACjCC,IAAI,EAAE,SAAAA;IAAA,OAAO;MACXhC,UAAU,EAAVA,UAAU;MACV2B,OAAO,EAAPA,OAAO;MACPC,OAAO,EAAPA,OAAO;MACPK,cAAc,EAAE1C;KACjB;GAAC;EACF2C,OAAO,EAAE;IACPC,IAAI,WAAAA,KAAC5B,SAAyB;MAC5B,IAAI,CAAChB,SAAS,EAAE;MAChB,IAAQ6C,EAAE,GAAyC7B,SAAS,CAApD6B,EAAE;QAAEC,IAAI,GAAmC9B,SAAS,CAAhD8B,IAAI;QAAE/B,UAAU,GAAuBC,SAAS,CAA1CD,UAAU;QAAAgC,gBAAA,GAAuB/B,SAAS,CAA9BgC,KAAK;QAALA,KAAK,GAAAD,gBAAA,cAAGE,QAAQ,GAAAF,gBAAA;MAC9C,IAAI,CAACF,EAAE,IAAI,CAACC,IAAI,IAAI,CAAC/B,UAAU,EAAE;MAEjC,IAAMmC,YAAY,GAAG;QACnBL,EAAE,EAAFA,EAAE;QACFC,IAAI,EAAJA,IAAI;QACJ/B,UAAU,EAAEb,MAAM,CAASa,UAAU,CAAC;QACtCiC,KAAK,EAALA;OACY;MACd,IAAMhB,IAAI,GAAGzB,MAAM,CAACyB,IAAI,CAAC,IAAI,CAACvB,UAAU,CAAC;MAEzC,IAAIuB,IAAI,CAACmB,OAAO,CAACN,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE;QAC3BN,GAAG,CAACa,GAAG,CAAC,IAAI,CAAC3C,UAAU,EAAEoC,EAAE,EAAE,EAAE,CAAC;;MAGlC,IAAMQ,YAAY,GAAG,IAAI,CAACC,mBAAmB,CAACJ,YAAY,CAAC;;MAE3D,IAAMK,aAAa,GAAG,IAAI,CAAC9C,UAAU,CAACoC,EAAE,CAAC,CAACW,KAAK,CAAC,CAAC,CAAC;MAClD,IAAIH,YAAY,KAAK,CAAC,CAAC,EAAE;QACvBE,aAAa,CAACE,IAAI,CAACP,YAAY,CAAC;OACjC,MAAM;QACLK,aAAa,CAACF,YAAY,CAAC,GAAGH,YAAY;;MAG5C,IAAI,CAACzC,UAAU,CAACoC,EAAE,CAAC,GAAGzB,UAAU,CAC9BmC,aAAa,EACb,UAAC5B,CAAY,EAAEC,CAAY;QAAA,OAAKD,CAAC,CAACqB,KAAK,GAAGpB,CAAC,CAACoB,KAAK;QAClD;KACF;IAEDU,KAAK,WAAAA,MAAC1C,SAA0B;UAAE2C,KAAK,GAAAhD,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;MAC7C,IAAQkC,EAAE,GAAW7B,SAAS,CAAtB6B,EAAE;QAAEC,IAAI,GAAK9B,SAAS,CAAlB8B,IAAI;MAChB,IAAI,CAACD,EAAE,IAAK,CAACC,IAAI,IAAIa,KAAK,KAAK,KAAM,EAAE;MACvC,IAAI,CAAC,IAAI,CAAClD,UAAU,CAACoC,EAAE,CAAC,EAAE;QACxB;;MAGF,IAAIc,KAAK,EAAE;QACT,IAAI,CAAClD,UAAU,CAACoC,EAAE,CAAC,GAAG,EAAE;OACzB,MAAM;QACL,IAAMe,KAAK,GAAG,IAAI,CAACN,mBAAmB,CAACtC,SAAS,CAAC;QACjD,IAAI4C,KAAK,IAAI,CAAC,EAAE;;UAEd,IAAML,aAAa,GAAG,IAAI,CAAC9C,UAAU,CAACoC,EAAE,CAAC,CAACW,KAAK,CAAC,CAAC,CAAC;UAClDD,aAAa,CAACM,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;UAC9B,IAAI,CAACnD,UAAU,CAACoC,EAAE,CAAC,GAAGU,aAAa;;;KAGxC;IACDO,cAAc,WAAAA,eAACC,MAAc,EAAEC,EAAO,EAAEL,KAAe;MACrD,IAAI,CAAC3D,SAAS,EAAE;MAChB,IAAI,IAAI,CAAC0C,cAAc,IAAI,CAACiB,KAAK,IAAI,IAAI,CAACvB,OAAO,CAAC2B,MAAM,CAAC,EAAE;QACzDE,OAAO,CAACC,IAAI,yBAAA/C,MAAA,CAAyB4C,MAAM,qBAAkB;;MAE/D,IAAI,CAACI,IAAI,CAAC,IAAI,CAAC/B,OAAO,EAAE2B,MAAM,EAAExD,MAAM,CAACL,MAAM,CAAC,CAAC8D,EAAE,CAAC,CAAC,CAAC;KACrD;IACDI,gBAAgB,WAAAA,iBAACL,MAAc;MAC7B,IAAI,CAACM,OAAO,CAAC,IAAI,CAACjC,OAAO,EAAE2B,MAAM,CAAC;KACnC;IACDO,cAAc,WAAAA,eAACC,MAAc,EAAEP,EAAO,EAAEL,KAAe;MACrD,IAAI,CAAC3D,SAAS,EAAE;MAChB,IAAI,IAAI,CAAC0C,cAAc,IAAI,CAACiB,KAAK,IAAI,IAAI,CAACtB,OAAO,CAACkC,MAAM,CAAC,EAAE;QACzDN,OAAO,CAACC,IAAI,yBAAA/C,MAAA,CAAyBoD,MAAM,qBAAkB;;MAE/D,IAAI,CAACJ,IAAI,CAAC,IAAI,CAAC9B,OAAO,EAAEkC,MAAM,EAAEhE,MAAM,CAACL,MAAM,CAAC,CAAC8D,EAAE,CAAC,CAAC,CAAC;KACrD;IACDQ,gBAAgB,WAAAA,iBAACD,MAAc;MAC7B,IAAI,CAACF,OAAO,CAAC,IAAI,CAAChC,OAAO,EAAEkC,MAAM,CAAC;KACnC;IACDE,SAAS,WAAAA,UAAC5B,EAAU;MAClB,OAAO,CAAC,EAAE,IAAI,CAACT,OAAO,CAACS,EAAE,CAAC,IAAI,IAAI,CAACT,OAAO,CAACS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KACnD;IACD6B,SAAS,WAAAA,UAAC7B,EAAU;MAClB,OAAO,CAAC,EAAE,IAAI,CAACR,OAAO,CAACQ,EAAE,CAAC,IAAI,IAAI,CAACR,OAAO,CAACQ,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KACnD;IACD8B,aAAa,WAAAA,cAAC9B,EAAU;MACtB,OAAO,CAAC,CAAC,IAAI,CAACpC,UAAU,CAACoC,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAACpC,UAAU,CAACoC,EAAE,CAAC,CAACjC,MAAM;KAC7D;;IAED0C,mBAAmB,WAAAA,oBAAAsB,IAAA;UAAG/B,EAAE,GAAA+B,IAAA,CAAF/B,EAAE;QAAEC,IAAI,GAAA8B,IAAA,CAAJ9B,IAAI;MAC5B,KAAK,IAAM+B,CAAC,IAAI,IAAI,CAACpE,UAAU,CAACoC,EAAE,CAAC,EAAE;QACnC,IAAI,IAAI,CAACpC,UAAU,CAACoC,EAAE,CAAC,CAACgC,CAAC,CAAC,CAAC/B,IAAI,KAAKA,IAAI,EAAE;UACxC,OAAO,CAAC+B,CAAC;;;MAGb,OAAO,CAAC,CAAC;;;CAGd,CAAC;AAEF,IAAMC,QAAQ,GAAG,IAAIxC,QAAQ,CAAC7B,UAAU,CAAC;;AC7GzC,IAAIsE,GAAG,GAAG,CAAC;AAEX,aAAexC,GAAG,CAACC,MAAM,CAAC;EACxBwC,IAAI,EAAE,QAAQ;EACdC,KAAK,EAAE;IACLC,QAAQ,EAAE;MAAEC,IAAI,EAAEC;KAAS;IAC3BJ,IAAI,EAAE;MAAEG,IAAI,EAAEE,MAAM;MAAEC,OAAO,EAAE,SAAAC;QAAA,OAAMF,MAAM,CAACN,GAAG,EAAE,CAAC;;KAAE;IACpD/B,KAAK,EAAE;MAAEmC,IAAI,EAAEK,MAAM;MAAEF,OAAO,EAAE;KAAG;IACnCG,IAAI,EAAE;MAAEN,IAAI,EAAEC;KAAS;IACvB1E,SAAS,EAAE;MAAEyE,IAAI,EAAE5E,MAAM;MAAE+E,OAAO,EAAE,SAAAC;QAAA,OAAO,EAAE;;KAAG;IAChDG,GAAG,EAAE;MAAEP,IAAI,EAAEE,MAAM;MAAEC,OAAO,EAAE;KAAO;IACrCzC,EAAE,EAAE;MACFsC,IAAI,EAAEE,MAAM;MACZC,OAAO,EAAE,SAAAC;QAAA,OAAMF,MAAM,CAACM,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,QAAQ,CAAC,CAAC;;;GAE9D;EACDC,OAAO,WAAAA;;IACL,IAAI,CAACC,SAAS,CAAC;MACbjB,QAAQ,CAACR,cAAc,CAAC0B,KAAI,CAAChB,IAAI,EAAEgB,KAAI,CAAC;KACzC,CAAC;GACH;EACDC,OAAO,WAAAA;IACL,IAAI,CAAC,IAAI,CAACf,QAAQ,EAAE;MAClB,IAAI,CAACgB,UAAU,EAAE;;GAEpB;EAEDC,OAAO,WAAAA;IACL,IAAI,IAAI,CAACjB,QAAQ,EAAE;MACjB,IAAI,CAACkB,KAAK,EAAE;KACb,MAAM;MACL,IAAI,CAACF,UAAU,EAAE;;GAEpB;EAEDG,aAAa,WAAAA;IACXvB,QAAQ,CAACN,gBAAgB,CAAC,IAAI,CAACQ,IAAI,CAAC;IACpC,IAAI,CAACoB,KAAK,EAAE;GACb;EACDE,KAAK,EAAE;IACLzD,EAAE,WAAAA,GAAC0D,QAAgB,EAAEC,QAAgB;MACnCA,QAAQ,IAAIA,QAAQ,KAAKD,QAAQ,IAAI,IAAI,CAACH,KAAK,CAACI,QAAQ,CAAC;MACzD,IAAI,CAACN,UAAU,EAAE;;GAEpB;EAEDvD,OAAO,EAAE;IACPyD,KAAK,WAAAA,MAACrC,MAAe;MACnB,IAAM0C,MAAM,GAAoB;QAC9B3D,IAAI,EAAE,IAAI,CAACkC,IAAI;QACfnC,EAAE,EAAEkB,MAAM,IAAI,IAAI,CAAClB;OACpB;MACDiC,QAAQ,CAACpB,KAAK,CAAC+C,MAAM,CAAC;KACvB;IACDC,cAAc,WAAAA;MACZ,OAAO,IAAI,CAACC,YAAY,CAACrB,OAAO,GAC5B,CAAC,IAAI,CAACqB,YAAY,CAACrB,OAAO,CAAC,GAC3B,IAAI,CAACsB,MAAM,CAACtB,OAAO;KACxB;IACDuB,oBAAoB,WAAAA,qBAACC,QAA4B;MAC/C,OAAO,OAAOA,QAAQ,KAAK,UAAU,GACjCA,QAAQ,CAAC,IAAI,CAACpG,SAAS,CAAC,GACxBoG,QAAQ;KACb;IACDZ,UAAU,WAAAA;MACR,IAAMa,WAAW,GAAG,IAAI,CAACL,cAAc,EAAE;MACzC,IAAIK,WAAW,EAAE;QACf,IAAM/F,SAAS,GAAmB;UAChC8B,IAAI,EAAE,IAAI,CAACkC,IAAI;UACfnC,EAAE,EAAE,IAAI,CAACA,EAAE;UACX9B,UAAU,EAAAiG,kBAAA,CAAMD,WAAW,CAAC;UAC5B/D,KAAK,EAAE,IAAI,CAACA;SACb;QACD8B,QAAQ,CAAClC,IAAI,CAAC5B,SAAS,CAAC;OACzB,MAAM;QACL,IAAI,CAACoF,KAAK,EAAE;;;GAGjB;EAEDa,MAAM,WAAAA,OAACC,CAAC;IACN,IAAMJ,QAAQ,GACZ,IAAI,CAACF,MAAM,CAACtB,OAAO,IAAI,IAAI,CAACqB,YAAY,CAACrB,OAAO,IAAI,EAAE;IACxD,IAAM6B,GAAG,GAAG,IAAI,CAACzB,GAAG;IACpB,IAAIoB,QAAQ,IAAI,IAAI,CAAC5B,QAAQ,EAAE;MAC7B,OAAO4B,QAAQ,CAAClG,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC6E,IAAI,GACtC,IAAI,CAACoB,oBAAoB,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAEtCI,CAAA,CAACC,GAAG,GAAE,IAAI,CAACN,oBAAoB,CAACC,QAAQ,CAAC,EAC1C;KACF,MAAM;MACL,OAAO,IAAI,CAACrB,IAAI,GACZyB,CAAC,EAAE,GACHA,CAAC,CAACC,GAAG,EAAE;QACLC,KAAK,EAAE;UAAE,UAAU,EAAE;SAAM;QAC3BC,KAAK,EAAE;UAAEC,OAAO,EAAE;SAAQ;QAC1BpF,GAAG,EAAE;OACN,CAAC;;;CAGX,CAAC;;AClGF,mBAAeK,GAAG,CAACC,MAAM,CAAC;EACxBwC,IAAI,EAAE,cAAc;EACpBC,KAAK,EAAE;IACLsC,QAAQ,EAAE;MAAEpC,IAAI,EAAEC,OAAO;MAAEE,OAAO,EAAE;KAAO;IAC3CN,IAAI,EAAE;MAAEG,IAAI,EAAEE,MAAM;MAAEmC,QAAQ,EAAE;KAAM;IACtC/B,IAAI,EAAE;MAAEN,IAAI,EAAEC,OAAO;MAAEE,OAAO,EAAE;KAAO;IACvC5E,SAAS,EAAE;MAAEyE,IAAI,EAAE5E,MAAM;MAAE+E,OAAO,EAAE,SAAAC;QAAA,OAAO,EAAE;;KAAG;IAChDG,GAAG,EAAE;MAAEP,IAAI,EAAEE,MAAM;MAAEC,OAAO,EAAE;KAAO;IACrCmC,UAAU,EAAE;MACVtC,IAAI,EAAE,CAACE,MAAM,EAAE9E,MAAM,EAAEmH,QAAQ;;GAElC;EACDjF,IAAI,WAAAA;IACF,OAAO;MACLhC,UAAU,EAAEqE,QAAQ,CAACrE,UAAU;MAC/BkH,WAAW,EAAE;KACd;GACF;EACD7B,OAAO,WAAAA;;IACL,IAAI,CAACC,SAAS,CAAC;MACbjB,QAAQ,CAAChB,cAAc,CAACkC,KAAI,CAAChB,IAAI,EAAEgB,KAAI,CAAC;KACzC,CAAC;GACH;EACDM,KAAK,EAAE;IACLsB,aAAa,WAAAA;MACX,IAAI,CAACC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAACf,QAAQ,EAAE,CAAClG,MAAM,GAAG,CAAC,CAAC;KACjD;IACDoE,IAAI,WAAAA,KAAC8C,MAAM,EAAEC,MAAM;;;;;MAKjBjD,QAAQ,CAACV,gBAAgB,CAAC2D,MAAM,CAAC;MACjCjD,QAAQ,CAAChB,cAAc,CAACgE,MAAM,EAAE,IAAI,CAAC;;GAExC;EACD7B,OAAO,WAAAA;;IACL,IAAI,IAAI,CAACwB,UAAU,EAAE;MACnB,IAAI,CAAC1B,SAAS,CAAC;;QAEbiC,MAAI,CAACL,WAAW,GAAG,KAAK;OACzB,CAAC;;GAEL;EACDtB,aAAa,WAAAA;IACXvB,QAAQ,CAACV,gBAAgB,CAAC,IAAI,CAACY,IAAI,CAAC;GACrC;EAEDiD,QAAQ,EAAE;IACRL,aAAa,WAAAA;MACX,IAAMnH,UAAU,GAAgB,IAAI,CAACA,UAAU,CAAC,IAAI,CAACuE,IAAI,CAAC,IAAI,EAAE;MAChE,IAAI,IAAI,CAACuC,QAAQ,EAAE;QACjB,OAAO9G,UAAU;;MAEnB,OAAOA,UAAU,CAACG,MAAM,KAAK,CAAC,GAAG,EAAE,GAAG,CAACH,UAAU,CAACA,UAAU,CAACG,MAAM,GAAG,CAAC,CAAC,CAAC;KAC1E;IACDG,UAAU,WAAAA;MACR,OAAOP,iBAAiB,CAAC,IAAI,CAACoH,aAAa,EAAE,IAAI,CAAClH,SAAS,CAAC;;GAE/D;EAEDiC,OAAO,EAAE;;IAEPmE,QAAQ,WAAAA;MACN,OAAO,IAAI,CAAC/F,UAAU,CAACH,MAAM,KAAK,CAAC,GAC/B,IAAI,CAACG,UAAU,GACf,IAAI,CAAC4F,YAAY,CAACrB,OAAO,GACxB,IAAI,CAACqB,YAAY,CAACrB,OAAO,CAAC,IAAI,CAAC5E,SAAS,CAAa,GACtD,IAAI,CAACkG,MAAM,CAACtB,OAAO,IAAI,EAAE;KAC9B;;IAED4C,SAAS,WAAAA;MACP,IAAMA,SAAS,GAAG,IAAI,CAACzC,IAAI,IAAI,CAAC,IAAI,CAACgC,UAAU;MAC/C,IAAIS,SAAS,IAAI,IAAI,CAACpB,QAAQ,EAAE,CAAClG,MAAM,GAAG,CAAC,EAAE;QAC3CqD,OAAO,CAACC,IAAI,CACV,qFAAqF,CACtF;;MAEH,OAAOgE,SAAS;;GAEnB;EACDjB,MAAM,WAAAA,OAACC,CAAC;IACN,IAAMgB,SAAS,GAAG,IAAI,CAACA,SAAS,EAAE;IAClC,IAAMpB,QAAQ,GAAG,IAAI,CAACA,QAAQ,EAAE;IAChC,IAAMK,GAAG,GAAG,IAAI,CAACM,UAAU,IAAI,IAAI,CAAC/B,GAAG;IAEvC,OAAOwC,SAAS,GACZpB,QAAQ,CAAC,CAAC,CAAC,GACX,IAAI,CAACrB,IAAI,IAAI,CAAC0B,GAAG,GACjBD,CAAC,EAAE,GACHA,CAAC,CACCC,GAAG,EACH;MACElC,KAAK,EAAE;;QAELS,GAAG,EAAE,IAAI,CAAC+B,UAAU,IAAI,IAAI,CAAC/B,GAAG,GAAG,IAAI,CAACA,GAAG,GAAG7E;OAC/C;MACDuG,KAAK,EAAE;QAAE,mBAAmB,EAAE;;KAC/B,EAEDN,QAAQ,CACT;;CAER,CAAC;;ACrGF,IAAI/B,KAAG,GAAG,CAAC;AAQX,IAAMoD,WAAW,GAAG,CAClB,UAAU,EACV,MAAM,EACN,OAAO,EACP,MAAM,EACN,WAAW,EACX,KAAK,EACL,IAAI,CACL;AAED,IAAMC,WAAW,GAAG,CAAC,UAAU,EAAE,YAAY,CAAC;AAE9C,qBAAgB7F,GAAwB,CAACC,MAAM,CAAC;EAC9CwC,IAAI,EAAE,gBAAgB;EACtBqD,YAAY,EAAE,KAAK;EACnBpD,KAAK,EAAE;IACLqD,MAAM,EAAE;MAAEnD,IAAI,EAAE,CAACC,OAAO,EAAEC,MAAM;KAAG;IACnCkD,IAAI,EAAE;MACJpD,IAAI,EAAEC;KACP;IACDoD,OAAO,EAAE;MAAErD,IAAI,EAAEE,MAAM;MAAEmC,QAAQ,EAAE;KAAM;;IAGzCtC,QAAQ,EAAE;MAAEC,IAAI,EAAEC;KAAS;;IAE3BJ,IAAI,EAAE;MACJG,IAAI,EAAEE,MAAM;MACZC,OAAO,EAAE,SAAAC;QAAA,OAAM,UAAU,GAAGF,MAAM,CAACN,KAAG,EAAE,CAAC;;KAC1C;IACD/B,KAAK,EAAE;MAAEmC,IAAI,EAAEK,MAAM;MAAEF,OAAO,EAAE;KAAG;IACnCG,IAAI,EAAE;MAAEN,IAAI,EAAEC;KAAS;IACvB1E,SAAS,EAAE;MAAEyE,IAAI,EAAE5E,MAAM;MAAE+E,OAAO,EAAE,SAAAC;QAAA,OAAO,EAAE;;KAAG;IAChDG,GAAG,EAAE;MAAEP,IAAI,EAAEE,MAAM;MAAEC,OAAO,EAAE;KAAO;;IAErCzC,EAAE,EAAE;MACFsC,IAAI,EAAEE,MAAM;MACZC,OAAO,EAAE,SAAAC;QAAA,OAAMF,MAAM,CAACM,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,QAAQ,CAAC,CAAC;;KAC5D;;IAGD0B,QAAQ,EAAE;MAAEpC,IAAI,EAAEC,OAAO;MAAEE,OAAO,EAAE;KAAO;IAC3CmD,UAAU,EAAE;MAAEtD,IAAI,EAAEC;KAAS;IAC7BsD,eAAe,EAAE;MAAEvD,IAAI,EAAE5E,MAAM;MAAE+E,OAAO,EAAE,SAAAC;QAAA,OAAO,EAAE;;KAAG;IACtDoD,SAAS,EAAE;MAAExD,IAAI,EAAEE,MAAM;MAAEC,OAAO,EAAE;KAAO;IAC3CmC,UAAU,EAAE;MACVtC,IAAI,EAAE,CAACE,MAAM,EAAE9E,MAAM,EAAEmH,QAAQ;;GAElC;EACD5B,OAAO,WAAAA;IACL,IAAI,OAAO8C,QAAQ,KAAK,WAAW,EAAE;IACrC,IAAIC,EAAE,GAAuBD,QAAQ,CAACE,aAAa,CAAC,IAAI,CAACN,OAAO,CAAC;IACjE,IAAI,CAACK,EAAE,EAAE;MACP,IAAIE,MAAM,GAAQH,QAAQ,CAACE,aAAa,CAAC,8BAA8B,CAAC;MACxED,EAAE,GACAE,MAAM,CAACC,aAAa,CAACJ,QAAQ,CAACK,IAAI,CAACH,aAAa,CAAC,IAAI,CAACN,OAAO,CAAC;;IAElE,IAAI,CAACK,EAAE,EAAE;MACP5E,OAAO,CAACiF,KAAK,+BAAA/H,MAAA,CACmB,IAAI,CAACqH,OAAO,6BAC3C;MACD;;IAGF,IAAMvD,KAAK,GAAG,IAAI,CAACkE,MAAM;;IAGzB,IAAIrE,QAAQ,CAAC1C,OAAO,CAAC6C,KAAK,CAACD,IAAI,CAAC,EAAE;MAChC,IAAIC,KAAK,CAACsD,IAAI,EAAE;QACdtE,OAAO,CAACC,IAAI,yBAAA/C,MAAA,CAAyB8D,KAAK,CAACD,IAAI,wEACT;OACvC,MAAM;QACL,IAAI,CAACoE,YAAY,GAAGtE,QAAQ,CAAC1C,OAAO,CAAC6C,KAAK,CAACD,IAAI,CAAC;;MAElD;;IAGF,IAAQsD,MAAM,GAAKrD,KAAK,CAAhBqD,MAAM;IACd,IAAIA,MAAM,EAAE;MACV,IAAMnD,IAAI,GAAG,OAAOmD,MAAM,KAAK,QAAQ,GAAGA,MAAM,GAAG,KAAK;MACxD,IAAMe,OAAO,GAAGT,QAAQ,CAACU,aAAa,CAACnE,IAAI,CAAC;MAC5C0D,EAAE,CAACU,WAAW,CAACF,OAAO,CAAC;MACvBR,EAAE,GAAGQ,OAAO;;;;IAKd,IAAMG,MAAM,GAAG1H,IAAI,CAAC,IAAI,CAACqH,MAAM,EAAEf,WAAW,CAAC;IAC7CoB,MAAM,CAAC/D,IAAI,GAAG,IAAI,CAACgD,UAAU;IAC7Be,MAAM,CAAC9D,GAAG,GAAG,IAAI,CAACiD,SAAS;IAC3Ba,MAAM,CAAC9I,SAAS,GAAG,IAAI,CAACgI,eAAe;IACvCc,MAAM,CAACxE,IAAI,GAAG,IAAI,CAACnC,EAAE;IAErB,IAAI,CAACuG,YAAY,GAAG,IAAIK,YAAY,CAAC;MACnCZ,EAAE,EAAFA,EAAE;MACFa,MAAM,EAAE,IAAI,CAACC,OAAO,IAAI,IAAI;MAC5BC,SAAS,EAAEJ;KACZ,CAAC;GACH;EAEDnD,aAAa,WAAAA;IACX,IAAMtC,MAAM,GAAG,IAAI,CAACqF,YAAY;IAChC,IAAI,IAAI,CAACd,MAAM,EAAE;MACf,IAAMO,EAAE,GAAG9E,MAAM,CAAC8F,GAAG;MACrBhB,EAAE,CAACiB,UAAU,CAACC,WAAW,CAAClB,EAAE,CAAC;;IAE/B9E,MAAM,CAACiG,QAAQ,EAAE;GAClB;EAED/C,MAAM,WAAAA,OAACC,CAAC;IACN,IAAI,CAAC,IAAI,CAACkC,YAAY,EAAE;MACtBnF,OAAO,CAACC,IAAI,CAAC,oCAAoC,CAAC;MAClD,OAAOgD,CAAC,EAAE;;;IAIZ,IAAI,CAAC,IAAI,CAACP,YAAY,CAACsD,MAAM,EAAE;MAC7B,IAAMhF,KAAK,GAAGnD,IAAI,CAAC,IAAI,CAACqH,MAAM,EAAEhB,WAAW,CAAC;MAC5C,OAAOjB,CAAC,CACNgD,MAAM,EACN;QACEjF,KAAK,EAAEA,KAAK;QACZkF,KAAK,EAAE,IAAI,CAACC,MAAM;QAClBC,EAAE,EAAE,IAAI,CAACC,UAAU;QACnBC,WAAW,EAAE,IAAI,CAAC5D;OACnB,EACD,IAAI,CAACC,MAAM,CAACtB,OAAO,CACpB;;;IAIH,IAAIkF,OAAO,GAAU,IAAI,CAAC7D,YAAY,CAACsD,MAAM,CAAC;MAC5CpH,EAAE,EAAE,IAAI,CAACA;KACV,CAAqB;;;IAItB,IAAIzC,KAAK,CAACC,OAAO,CAACmK,OAAO,CAAC,EAAE;MAC1BA,OAAO,GAAGA,OAAO,CAAC,CAAC,CAAC;;IAGtB,IAAI,CAACA,OAAO,EAAE,OAAOtD,CAAC,EAAE;IAExB,OAAOsD,OAAO;;CAEjB,CAAC;;AC9IF,SAASC,OAAOA,CAAClI,MAAwB;MAAEmI,8EAAyB,EAAE;EACpEnI,MAAG,CAACoI,SAAS,CAACD,OAAO,CAACE,UAAU,IAAI,QAAQ,EAAEV,MAAM,CAAC;EACrD3H,MAAG,CAACoI,SAAS,CAACD,OAAO,CAACG,gBAAgB,IAAI,cAAc,EAAEpB,YAAY,CAAC;EACvElH,MAAG,CAACoI,SAAS,CAACD,OAAO,CAACI,kBAAkB,IAAI,gBAAgB,EAAEC,cAAc,CAAC;;AAE/E,AAUA,YAAe;EACbN,OAAO,EAAPA;CACD;;;;;;;;"}